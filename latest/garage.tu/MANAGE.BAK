#include "manage.h"


void back_mouse(char *FILENAME) //调用背景图片以及调用鼠标
{
    mou oldmouse,curmouse;
	oldmouse.x=0;oldmouse.y=0;oldmouse.key=0;
    curmouse.x=0;curmouse.y=0;curmouse.key=0;
	sprite small;
	pcx_picture background_pcx,objects_pcx;
	Set_Video_Mode(VGA256);
	PCX_Load1("mouse.pcx",(pcx_picture_ptr)&objects_pcx,1);//调用图片文件
	Sprite_Init_Size((sprite_ptr)&small,0,0,0,0,0,0,65,55,1);//初始化小图片
	PCX_Grab_Bitmap_Size_Screen((pcx_picture_ptr)&objects_pcx,(sprite_ptr)&small,0,0,0,65,55);//将屏幕内容复制给小图片
	Fill_Screen(0);
	PCX_Load1(FILENAME,(pcx_picture_ptr)&background_pcx,1);//背景
	Behind_Sprite_Size((sprite_ptr)&small,65,55);//取图片后内容
	mousecheck();//初始化鼠标
	mousemove();//设置鼠标范围
	while(!kbhit())
{
	mouseread(&curmouse)  ;//取鼠标位置
	if(curmouse.x!=oldmouse.x||curmouse.y!=oldmouse.y)//判断是否移动过鼠标
	{
		Erase_Sprite_Size((sprite_ptr)&small,65,55);//显示小图片后背景内容
		small.x=curmouse.x/2;
		small.y=curmouse.y;
		Behind_Sprite_Size((sprite_ptr)&small,65,55);//保存小图片后背景内容
		Draw_Sprite_Size((sprite_ptr)&small,65,55);//显示小图片于鼠标位置
		oldmouse.x=curmouse.x;
		oldmouse.y=curmouse.y;
	}
}
getch();
Sprite_Delete_Size((sprite_ptr)&small,1);
getch();
}
 
/* ***********车位使用历史界面**********/

void jiemian_manage_history()
{
   mou oldmouse,curmouse;
   back_mouse(history);	  //1=search
   
   mouseread(&curmouse);//取鼠标位置
      
    if(curmouse.x>20 && curmouse.x<250 && curmouse.y>66 && curmouse.y<80 && curmouse.key)//判断范围
    {
        Set_Video_Mode(TEXT_MODE); 
	  //  process();
	}

}

/* ***********车位使现况 界面**********/

void jiemian_manage_current()
{   
    //mou oldmouse,curmouse;
    back_mouse(current);
    //mouseread(&curmouse);//取鼠标位置
    /*  
    if(curmouse.x>20 && curmouse.x<250 && curmouse.y>66 && curmouse.y<80 && curmouse.key)//判断范围
    {
        Set_Video_Mode(TEXT_MODE); 
        jiemian_manage_history();
    
    }
    */

}


